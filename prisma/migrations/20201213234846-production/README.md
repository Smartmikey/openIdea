# Migration `20201213234846-production`

This migration has been generated by Michael Abah at 12/14/2020, 12:48:47 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Badge" (
"id" SERIAL,
"title" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Category" (
"id" SERIAL,
"title" text   NOT NULL ,
"slug" text   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Comment" (
"id" SERIAL,
"content" text   NOT NULL ,
"date" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"commentBy" integer   ,
"postId" integer   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Post" (
"id" SERIAL,
"title" text   NOT NULL ,
"content" text   NOT NULL ,
"postedBy" integer   ,
"date" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"categoryId" integer   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."User" (
"id" SERIAL,
"name" text   NOT NULL ,
"email" text   NOT NULL ,
"password" text   NOT NULL ,
"country" text   ,
"badges" integer   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Vote" (
"id" SERIAL,
"userId" integer   ,
"postId" integer   ,
"date" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Implement" (
"id" SERIAL,
"userId" integer   ,
"postId" integer   ,
"date" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"comment" text   ,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")

ALTER TABLE "public"."Comment" ADD FOREIGN KEY ("commentBy")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Comment" ADD FOREIGN KEY ("postId")REFERENCES "public"."Post"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Post" ADD FOREIGN KEY ("categoryId")REFERENCES "public"."Category"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Post" ADD FOREIGN KEY ("postedBy")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."User" ADD FOREIGN KEY ("badges")REFERENCES "public"."Badge"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Vote" ADD FOREIGN KEY ("postId")REFERENCES "public"."Post"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Vote" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Implement" ADD FOREIGN KEY ("postId")REFERENCES "public"."Post"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Implement" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201213234846-production
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,80 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model Badge {
+  id      Int    @id @default(autoincrement())
+  title   String
+  // This type is currently not supported.
+  // icon binary
+  user    User[]
+}
+
+model Category {
+  id    Int     @id @default(autoincrement())
+  title String
+  slug  String?
+  post  Post[]
+}
+
+model Comment {
+  id        Int      @id @default(autoincrement())
+  content   String
+  date      DateTime @default(now())
+  commentBy Int?
+  postId    Int?
+  user      User?    @relation(fields: [commentBy], references: [id])
+  post      Post?    @relation(fields: [postId], references: [id])
+}
+
+model Post {
+  id         Int         @id @default(autoincrement())
+  title      String
+  content    String
+  postedBy   Int?
+  date       DateTime    @default(now())
+  categoryId Int?
+  category   Category?   @relation(fields: [categoryId], references: [id])
+  postBy       User?       @relation(fields: [postedBy], references: [id])
+  comment    Comment[]
+  implement  Implement[]
+  vote       Vote[]
+}
+
+model User {
+  id        Int         @id @default(autoincrement())
+  name      String
+  email     String      @unique
+  password  String
+  country   String?
+  badges    Int?
+  badge     Badge?      @relation(fields: [badges], references: [id])
+  comments  Comment[]
+  implement Implement[]
+  posts     Post[]
+  vote      Vote[]
+}
+
+model Vote {
+  id     Int      @id @default(autoincrement())
+  userId Int?
+  postId Int?
+  date   DateTime @default(now())
+  post   Post?    @relation(fields: [postId], references: [id])
+  user   User?    @relation(fields: [userId], references: [id])
+}
+
+model Implement {
+  id      Int      @id @default(autoincrement())
+  userId  Int?
+  postId  Int?
+  date    DateTime @default(now())
+  comment String?
+  post    Post?    @relation(fields: [postId], references: [id])
+  user    User?    @relation(fields: [userId], references: [id])
+}
```


